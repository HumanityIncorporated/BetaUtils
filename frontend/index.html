<!DOCTYPE html>
<html>
  <head>
    <script src='./utils.js'></script>
    <title>Welcome | BetaOS Services</title>
    <script>
      const accessLevels = ["error-level", "user", "admin", "super-admin"];
      send(JSON.stringify({action:"userRequest"}), 
       (res)=>{
         if (res.status == "ERROR") {
           if (res.data.error.match("Database")) {
              document.getElementById('status').className = "btn szHalf red";
              document.getElementById('statspan').innerHTML = "error";
           }
           return; 
         }
         let ele = document.getElementById("welcomeHdr");
         ele.innerText = "Welcome "+res.data.user+"!"; 
         let userInfo = document.createElement("h2");
         setInterval(()=>{userInfo.innerHTML = "logged in as "+accessLevels[res.data.perms]+
           (res.data.expiry<Date.now()?" (session expired)":
            (res.data.expiry>100*365*24*69*60*1000?` (session expiring in 
            <span class="material-symbols-outlined">all_inclusive</span> days)`:
             " (session expiring in "+toTime(res.data.expiry-Date.now())+")"));
          }, 100);
         ele.append(userInfo);
         userInfo.style.fontSize = "0.4em";
         let loginBtn = document.getElementById("loginBtn")
         let signupBtn = document.getElementById("signupBtn")
         let adminBtn = document.getElementById("adminBtn")
         let configBtn = document.getElementById("configBtn")
         let logoutBtn = document.getElementById("logoutBtn");
         loginBtn.style.display="none";
         signupBtn.style.display="none";
         logoutBtn.style.display="inline-block";
         configBtn.style.display=res.data.perms>=1?"inline-block":"none";
         adminBtn.style.display = res.data.perms==1?"none":"inline-block";
         configBtn.className = res.data.perms>1?"btn szThird":"btn szTwoThirds";
         console.log(signupIco.innerHTML);
       });
    </script>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Display:wght@100;400;700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="/globalformat.css">
    <style>
      
      h1 {
        font-size: 4em;
        font-weight: 700;
        margin: 0px;
        width: 80%;
        margin: auto;
      }
      .btnRow {
        width: 90%;
        margin: auto;
      }
    </style>
  </head>
  <body onload = "globalOnload();">
    <div class="main_content">
      <header>
        <h1 id="welcomeHdr">Welcome to BetaOS Services!</h1>
        <hr class="rounded">
      </header>
      <div class="btnRow">
        <a id="status" class="btn szHalf grn" href="/status">
          <span id="statspan"class="material-symbols-outlined">published_with_changes </span>
           Status<div class="anim"></div></a>
        <a class="btn szHalf" href="/support">
          <span class="material-symbols-outlined" id="loginIco">help</span>
          Support<div class="anim"></div></a>
        <a id="signupBtn" class="btn szTwoThirds" href="/signup">
          <span class="material-symbols-outlined" id="signupIco">person_add</span>
          Sign-up<div class="anim"></div></a>
        <a id="loginBtn" class="btn szThird" href="/login">
          <span class="material-symbols-outlined" id="loginIco">login</span>
          Login<div class="anim"></div></a>
        <a id="logoutBtn" class="btn szThird ylw" href="/logout" style="display:none">
          <span class="material-symbols-outlined" id="signupIco">logout</span>
          Logout<div class="anim"></div></a>
        <a id="configBtn" class="btn szThird" href="/account" style="display:none">
          <span class="material-symbols-outlined" id="loginIco">settings</span>
          Account<div class="anim"></div></a>
        <a id="adminBtn" class="btn szThird" href="/admin" style="display:none">
          <span class="material-symbols-outlined" id="loginIco">security</span>
          Admin<div class="anim"></div></a>
        <a class="btn szTwoThirds grn" href="/todo">
          <span class="material-symbols-outlined">checklist</span>
          To do<div class="anim"></div></a>
        <a class="btn szThird ylw" href="/syslog">
          <span class="material-symbols-outlined">security</span>
          SysLog<div class="anim"></div></a>
        <a class="btn szHalf" href="/EE">
          <span class="material-symbols-outlined">sync</span>
          Page of Edits<div class="anim"></div></a>
        <a class="btn szHalf" href="/EEdit">
          <span class="material-symbols-outlined">edit</span>
          Edit the page!<div class="anim"></div></a>
        <a class="btn szThird" href="/about">
          <span class="material-symbols-outlined">info</span>
          About<div class="anim"></div></a>
        <a class="btn szThird fsmed" href="/commands">
          <span class="material-symbols-outlined">build</span>
          Commands<div class="anim"></div></a>
        <a class="btn szThird" href="/contact">
          <span class="material-symbols-outlined">phone</span>
          Contact<div class="anim"></div></a>
        
<!--         <a class="btn szHalf" href="/login">login4<div class="anim"></div></a>
        <a class="btn szHalf" href="/login">Login5<div class="anim"></div></a>
        <a class="btn szTwoThirds" href="/login">Login6<div class="anim"></div></a>
        <a class="btn szThird" href="/login">Login7<div class="anim"></div></a>
        <a class="btn szFull" href="/login">Login<div class="anim"></div></a> -->
      </div>
    </div>
    
  </body>
</html>