{
  "version": 3,
  "sources": ["../server.ts"],
  "sourcesContent": ["const express = require('express')\nconst app = express()\nconst crypto = require(\"crypto\");\nconst parse = require(\"co-body\");\n // for generating secure random #'s\nimport {connectionSuccess} from './index';\nimport {port, msgDB, authDB, frontendDir, roomRegex, rootDir, jsDir, uDB} from './consts';\nimport {signup, validateLogin, logout} from './validateLogin';\nimport { deleteAccount } from './delacc';\nimport {updateUser, realias, toggleTheme} from './updateUser'\nimport {userRequest} from './userRequest';\nimport {EE} from './EEHandler';\nimport {addTask, getTasks, updateTask, deleteTask} from './tasks';\nimport {getLogs, log, purgeLogs, visitCt, incrRequests} from './logging';\nconst bodyParser = require('body-parser');\nconst cookieParser = require('cookie-parser')\nimport {supportHandler, roomRequest, sendMsg, \n        createRoom, deleteRoom, WHOIS, loadLogs} from './supportRooms'\nconst urlencodedParser = bodyParser.urlencoded({ extended: false }) \nvar RateLimit = require('express-rate-limit');\n\nexport async function initServer() {\n  var limiter = RateLimit({\n    windowMs: 10*1000, // 10 seconds\n    max: 50,\n    message: \"Too many requests, please try again later.\",\n    statusCode: 429, // 429 status = Too Many Requests (RFC 6585)\n  });\n  app.use(limiter);\n  app.use(new cookieParser());\n  \n  app.get('/', (req:Request, res:any) => {\n    res.sendFile(frontendDir+'/index.html');\n    incrRequests();\n  })\n  \n  app.get('/register', (req:any, res:any) => {\n    res.sendFile(frontendDir+'/signup.html');\n    incrRequests();\n  });\n\n\n  app.get('/account', (req:any, res:any) => {\n    res.sendFile(frontendDir+'/config.html');\n    incrRequests();\n  });\n\n  \n  app.get('/EE', (req:any, res:any) => {\n    EE(true, (_status:string, data:any, _token:string)=>{\n      res.set('Content-Type', 'text/html')\n      res.send(Buffer.from(eeFormat(data.data)));\n    }, \"\", \"\")\n    \n    incrRequests();\n  });\n\n  \n\n  app.get('/support', (req:any, res:any) => {\n    let match = req.url.match('\\\\?room=('+roomRegex+\")\");\n    if (match) {\n      if (!supportHandler.checkFoundQ(match[1])) {\n        console.log(\"Room not found\")\n        res.sendFile(frontendDir+\"/room404.html\");\n        return;\n      }\n      else res.sendFile(frontendDir+'/support.html');\n    }\n    else res.sendFile(frontendDir+'/supportIndex.html');\n    incrRequests();\n  });\n\n  app.get('/accountDel', (req:any, res:any) => {\n    res.sendFile(frontendDir+'/delAcc.html');\n    incrRequests();\n  });\n\n   app.get('/whois', (req:any, res:any) => {\n    res.sendFile(frontendDir+'/aboutme.html');\n    incrRequests();\n  });\n\n  app.get(\"/cmd\", urlencodedParser, async (req:any, res:any) => {\n    makeRequest(req.query.action, req.cookies.sessionID, null, (s:string, d:any, token:string)=>{\n      console.log(d);\n      if (s == \"SUCCESS\") res.sendFile(frontendDir+'/actionComplete.html');\n      else {res.sendFile(frontendDir+'/error.html')}\n    })\n    incrRequests();\n  })\n    \n  app.get('*/favicon.ico', (req:Request, res:any)=> {\n    res.sendFile(rootDir+'/favicon.ico')\n    incrRequests();\n  })\n\n  \n  app.get('/support.js', (req:any, res:any) => {\n    res.sendFile(frontendDir+\"support.js\");\n    incrRequests();\n  })\n  \n  app.get('/*.js*', (req:any, res:any) => {\n    res.sendFile(jsDir+req.url);\n    incrRequests();\n  })\n\n  \n  app.get('/*.ts', (req:any, res:any) => {\n    res.sendFile(jsDir+req.url);\n    incrRequests();\n  })\n\n  app.get('/*.css', (req:any, res:any) => {\n    res.sendFile(frontendDir+req.url);\n    incrRequests();\n  })\n\n  app.get(\"/stream\", (req:any, res:any) =>{\n    res.set({\n      'Cache-Control': 'no-cache',\n      'Content-Type': 'text/event-stream',\n      'Connection': 'keep-alive'\n    });\n    res.flushHeaders();\n    res.write(\"retry:500\\n\\n\");\n    // add the connection\n    supportHandler.addConnection(res, req.query.room, req.cookies.sessionID);\n    res.on(\"close\", () => {\n      // clear the connection\n      supportHandler.removeConnection(res, req.query.room, req.cookies.sessionID);\n      res.end();\n      // console.log(\"Removed stream\");\n    });\n  });\n\n  app.get('/oauth2callback', (req:any, res:any)=>{\n    console.log(\"??\")\n    console.log(req.url);\n  });\n  \n  app.post('/oauth2callback', (req:any, res:any)=>{\n    console.log(\"??\")\n    console.log(req.url);\n  })\n\n  app.get('/*', (req:any, res:any) => {\n    let requrl = req.url.match(\"([^?]*)\\\\??.*\")[1]\n    let idx = validPages.findIndex((obj)=>obj.toLowerCase()==requrl.toLowerCase());\n    if (idx>=0) res.sendFile(frontendDir+validPages[idx]+\".html\");\n    else {\n      res.status(404);\n      res.sendFile(frontendDir+\"404.html\");\n    }\n    incrRequests();\n  })\n  \n  \n  app.post('/server', urlencodedParser, async (req:any, res:any) => {\n    incrRequests();\n    if (req.headers['content-length'] > 60000) {\n      res.set(\"Connection\", \"close\");\n      res.status(413).end();\n      return;\n    }\n    var body = await parse.json(req);\n    if (!body) res.end(JSON.stringify({status:\"ERROR\", data:{error:\"No command string\"}}));\n    // let cookiematch = req.cookies.match(\"sessionID=[0-9a-zA-Z\\\\-]\");\n    // COOKIE ACCEPTANCE DIALOG \n    if (body.action == \"cookieRequest\") {\n      res.end(JSON.stringify({data:req.cookies.acceptedQ??false}))\n      return;\n    }\n    if (body.action == \"acceptCookies\") {\n      res.cookie('acceptedQ', true, {httpOnly: true, secure:true, sameSite:\"Strict\"})\n      res.end(JSON.stringify(\"\"));\n      return;\n    }\n    //////////////////////////\n    makeRequest(body.action, req.cookies.sessionID, body.data, (s:string, d:any, token:string)=>{\n      /*if(body.action==\"login\"||body.action == \"logout\" ||\n        body.action == \"delAcc\" || body.action == \"signup\")*/\n      if (ignoreLog.indexOf(body.action)>=0){}\n      else if (s==\"SUCCESS\") {\n        log(\"Action performed:\"+body.action+\", response:\"+JSON.stringify(d));\n      }\n      else log(\"Action performed, error on \"+body.action+\", error:\"+d.error);\n      res.cookie('sessionID', token?token:\"\", {httpOnly: true, secure:true, sameSite:\"Strict\"});\n      res.end(JSON.stringify({status:s, data:d}));\n    })\n  });\n  \n  app.listen(port, () => {\n    console.log(`BetaUtilities V2 listening on port ${port}`)\n  })\n}\n\nfunction makeRequest(action:string|null, token:string, data:any|null, callback: (status:string, dat:any, token:string)=>any) {\n  if (!connectionSuccess) {\n    callback(\"ERROR\", {error:\"Database connection failure\"}, token);\n    return;\n  }\n  switch (action) {\n    case 'test':\n      callback(\"SUCCESS\", {abc:\"def\", def:5}, token);\n      break;\n    case 'login': \n      if (!data) {callback(\"ERROR\", {error:\"No data provided\"}, token); break;}\n      // validate login-data before sending to server\n      data = data as {user:string, pass:string, persistQ:boolean};\n      validateLogin(data.user, data.pass, data.persistQ, token).\n        then((obj:{status:string, data:any, token:string})=>\n          {callback(obj.status, obj.data, obj.token)});\n      break;\n    case 'signup':\n      if (!data) {callback(\"ERROR\", {error:\"No data provided\"}, token); break;}\n      data = data as {user:string, pass:string};\n      signup(data.user, data.pass, token)\n        .then((obj:{status:string, data:any, token:string})=>\n          {callback(obj.status, obj.data, obj.token)});;\n      break;\n    case 'userRequest': \n      userRequest(token)\n        .then((obj:{status:string, data:any, token:string})=>\n          {callback(obj.status, obj.data, obj.token)});\n      break;\n    case 'roomRequest':\n      let obj2 = roomRequest(token); // this one is synchronous\n      callback(obj2.status, obj2.data, obj2.token);\n      break;\n    case 'createRoom':\n      if (!data) {callback(\"ERROR\", {error:\"No data provided\"}, token); break;}\n      data = data as {name:string}\n      createRoom(data.name, token)\n        .then((obj:{status:string, data:any, token:string})=>\n          {callback(obj.status, obj.data, obj.token)});\n      break;\n    case 'deleteRoom':\n      if (!data) {callback(\"ERROR\", {error:\"No data provided\"}, token); break;}\n      data = data as {name:string}\n      deleteRoom(data.name, token)\n        .then((obj:{status:string, data:any, token:string})=>\n          {callback(obj.status, obj.data, obj.token)});\n      break;\n    case 'statusRequest':\n      let obj3 = roomRequest(token, true);\n      callback(obj3.status, obj3.data, obj3.token);\n      break;\n    case 'getEE':\n      EE(true, callback, token, \"\");\n      break;\n    case 'setEE':\n      if (!data) {callback(\"ERROR\", {error:\"No data provided\"}, token); break;}\n      data = data as {data:string}\n      EE(false, callback, token, data.data);\n      break;\n    case 'updateuser': \n      if (!data) {callback(\"ERROR\", {error:\"No data provided\"}, token); break;}\n      data = data as {user:string, oldPass: string, pass:string, newPermLevel:string};\n      updateUser(data.user, data.oldPass, data.pass, data.newPermLevel, token)\n      .then((obj:{status:string, data:any, token:string})=>\n          {callback(obj.status, obj.data, obj.token)});\n      break;\n    case 'delAcc':\n      if (!data) {callback(\"ERROR\", {error:\"No data provided\"}, token); break;}\n      data = data as {user:string, pass:string};\n      deleteAccount(data.user, data.pass, token)\n      .then((obj:{status:string, data:any, token:string})=>\n          {callback(obj.status, obj.data, obj.token)});\n      break;\n    case 'logout':\n      logout(token)\n      .then((obj:{status:string, data:any, token:string})=>\n          {callback(obj.status, obj.data, obj.token)});\n      break;\n    case 'logout_all':\n      logout(token, true)\n      .then((obj:{status:string, data:any, token:string})=>\n          {callback(obj.status, obj.data, obj.token)});\n      break;\n    case 'sendMsg':\n      if (!data) {callback(\"ERROR\", {error:\"No data provided\"}, token); break;}\n      data = data as {msg:string, room:string};\n      if (data.msg.length == 0) {\n        callback(\"SUCCESS\", null, token); break;\n      }\n      sendMsg(data.msg.slice(0, 1024), data.room, token, callback);\n      break;\n    case 'lookup':\n      if (!data) {callback(\"ERROR\", {error:\"No data provided\"}, token); break;}\n      WHOIS(token, data.user)\n      .then((obj:{status:string, data:any, token:string})=>\n          {callback(obj.status, obj.data, obj.token)});\n      break;\n    case \"getLogs\":\n      getLogs(token)\n      .then((obj:{status:string, data:any, token:string})=>\n          {callback(obj.status, obj.data, obj.token)});\n      break;\n    case \"purgeLogs\":\n      purgeLogs(token)\n      .then((obj:{status:string, data:any, token:string})=>\n        {callback(obj.status, obj.data, obj.token)});\n      break;\n    case \"realias\":\n      if (!data) {callback(\"ERROR\", {error:\"No data provided\"}, token); break;}\n      realias(data.alias, token)\n      .then((obj:{status:string, data:any, token:string})=>\n        {callback(obj.status, obj.data, obj.token)});\n      break;\n    case \"visits\":\n      visitCt(token)\n      .then((obj:{status:string, data:any, token:string})=>\n        {callback(obj.status, obj.data, obj.token)});\n      break;\n    case \"addTODO\":\n      addTask(token)\n      .then((obj:{status:string, data:any, token:string})=>\n        {callback(obj.status, obj.data, obj.token)});\n      break;\n    case \"getTodo\":\n      getTasks(token)\n      .then((obj:{status:string, data:any, token:string})=>\n        {callback(obj.status, obj.data, obj.token)});\n      break;\n    case \"updateTODO\":\n      if (!data) {callback(\"ERROR\", {error:\"No data provided\"}, token); break;}\n      updateTask(token, data.id, data.updated)\n      .then((obj:{status:string, data:any, token:string})=>\n        {callback(obj.status, obj.data, obj.token)});\n      break;\n    case \"deleteTODO\":\n      if (!data) {callback(\"ERROR\", {error:\"No data provided\"}, token); break;}\n      deleteTask(token, data.id)\n      .then((obj:{status:string, data:any, token:string})=>\n        {callback(obj.status, obj.data, obj.token)});\n      break;\n    case \"completeTODO\":\n      if (!data) {callback(\"ERROR\", {error:\"No data provided\"}, token); break;}\n      deleteTask(token, data.id, true)\n      .then((obj:{status:string, data:any, token:string})=>\n        {callback(obj.status, obj.data, obj.token)});\n      break;\n    case \"loadLogs\": // {\"action\":\"loadLogs\",\"room\":\"BetaOS\",\"id\":\"11\",\"from\":24}\n      if (!data) {callback(\"ERROR\", {error:\"No data provided\"}, token); break;}\n      loadLogs(data.room, data.id, data.from, token)\n      .then((obj:{status:string, data:any, token:string})=>\n        {callback(obj.status, obj.data, obj.token)});\n      break;\n    case 'toggleTheme':\n      toggleTheme(token)\n      .then((obj:{status:string, data:any, token:string})=>\n        {callback(obj.status, obj.data, obj.token)});\n      break;\n    default:\n      callback(\"ERROR\", {error: \"Unknown command string!\"}, token);\n  }\n  console.log(\"request made\")\n  return; \n}\n\n\nfunction eeFormat(data:string) {\n  return `<!DOCTYPE html>\n<html>\n  <head>\n    <script src='./utils.js'></script>\n    <title>Everyone Edits | BetaOS Systems</title>\n    <script>\n    </script>\n    <meta name=\"viewport\" content=\"width=device-width\">\n    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200\" />\n    <link href=\"https://fonts.googleapis.com/css2?family=Noto+Sans+Display:wght@100;400;700&display=swap\" rel=\"stylesheet\">\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link rel=\"stylesheet\" href=\"/globalformat.css\">\n    <style>\n    </style>\n  </head>\n  <body onload = \"globalOnload();\">\n    <div class=\"main_content\">\n    <header>\n      <h2>Everybody edits!</h2>\n      <hr class=\"rounded\">\n    </header>\n      ${data}\n    </div>\n    \n    <div class=\"overlay\" id=\"overlay\">\n      <div class=\"internal\">\n        <p class=\"fsmed\" id=\"alerttext\">Hey, some text here</p>\n        <button class=\"btn szTwoThirds\" onclick=\"closeAlert()\">\n          Continue\n          <span class=\"material-symbols-outlined\">arrow_forward_ios</span>\n          <div class=\"anim\"></div>\n        </button>\n      </div>\n    </div>\n  </body>\n</html>`;\n}\n\nconst validPages = [\"/commands\", '/contact', '/EEdit', '/todo', '/status', '/logout', '/signup', \n                    '/config', '/admin', '/docs', '/login', '/syslog', '/aboutme', '/mailertest', \"/oauth2callback\"];\nconst ignoreLog = [\"getEE\", \"userRequest\", 'getLogs', 'visits', 'roomRequest', 'sendMsg'];"],
  "mappings": "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",
  "names": []
}
