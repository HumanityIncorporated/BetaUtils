{
  "version": 3,
  "sources": ["../server.ts"],
  "sourcesContent": ["// we have a front-end!\nconst express = require('express');\nconst path = require('path');\nconst fs = require('fs');\nconst bodyParser = require('body-parser');  \n// Create application/x-www-form-urlencoded parser  \nconst urlencodedParser = bodyParser.urlencoded({ extended: false })  \nconst app = express();\nconst port = 4000;\nimport {rooms} from './messageHandle';\nimport { validate } from './accessControl';\nexport function updateServer() {  \n  \n  app.get('/', (req:any, res:any) => {\n    res.sendFile(path.join( __dirname, '../frontend', 'index.html' ));\n  });\n  app.get('/favicon.ico', (req:any, res:any) => {\n    res.sendFile(path.join( __dirname, '../frontend', 'favicon.ico' ));\n  });\n  app.get('/NotoSansDisplay-Variable.ttf', (req:any, res:any) => {\n    res.sendFile(path.join( __dirname, '../frontend', 'NotoSansDisplay-Variable.ttf' ));\n  });\n  app.get('/status/status_raw.html', (req:any, res:any) => {\n    res.sendFile(path.join( __dirname, '../frontend', 'status_raw.html' ));\n  });\n  \n  app.get('/frontend.js', (req:any, res:any) => {\n    res.sendFile(path.join( __dirname, '../.build/frontend', 'frontend.js' ));\n  });\n\n  app.get('/login.js', (req:any, res:any) => {\n    res.sendFile(path.join( __dirname, '../.build/frontend', 'login.js' ));\n  });\n\n  app.get('/login', (req:any, res:any) => {\n    res.sendFile(path.join( __dirname, '../frontend', 'login.html' ));\n  });\n\n  app.get('/admin', (req:any, res:any) => {\n    res.sendFile(path.join( __dirname, '../frontend', 'admin.html' ));\n  });\n\n  app.get('/logout', (req:any, res:any) => {\n    res.sendFile(path.join( __dirname, '../frontend', 'logout.html' ));\n  });\n\n  app.get('/signup', (req:any, res:any) => {\n    res.sendFile(path.join( __dirname, '../frontend', 'signup.html' ));\n  });\n  \n  app.post('/login', urlencodedParser, function (req:any, res:any) {  \n   // Prepare output in JSON format  \n    // if ()\n    // console.log(req.body)\n    console.log(\"Logging in as \"+req.body.action + \"+\"+req.body.token);\n    validate(req.body.user as string, req.body.pass as string, req.body.action, req.body.access as string, res, req.body.token as string)\n   \n  });\n\n  app.get('/status', (req:any, res:any) => {\n    let str = \"BetaUtilities is in: \";\n    for (let j = 0; j < rooms.length - 1; j++) { \n      str += ` <a href=\"https://euphoria.io/room/${rooms[j]}\">&${rooms[j]}</a>,` ; \n    }\n    str += ` ${rooms.length>1?\"and \":\"\"}<a href=\"https://euphoria.io/room/${rooms[rooms.length-1]}\">&${rooms[rooms.length-1]}</a>!  `;\n    if (rooms.length == 0) {\n      str = \"ERROR\";\n    } // rooms failed\n    fs.writeFileSync(\"frontend/status_raw.html\",str);\n    res.sendFile(path.join( __dirname, '../frontend', 'status.html' ));\n  });\n\n  app.get(\"/globalformat.css\", (req:any, res:any) => {\n    res.sendFile(path.join( __dirname, '../frontend', 'globalformat.css' ));\n  }); \n\n  app.get('/*', (req:any, res:any) => {\n    res.sendFile(path.join( __dirname, '../frontend', '404.html' ));\n  });\n\n  // app.use(function(req:any, res:any, next:any) {\n  //     res.status(404).render('frontend/landing.html');\n  // });\n  // app.get()\n  \n  app.listen(port, () => {\n    console.log(`Front-end is running on ${port}.`);\n  });\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AASA,2BAAoB;AACpB,2BAAyB;AATzB,MAAM,UAAU,QAAQ,SAAS;AACjC,MAAM,OAAO,QAAQ,MAAM;AAC3B,MAAM,KAAK,QAAQ,IAAI;AACvB,MAAM,aAAa,QAAQ,aAAa;AAExC,MAAM,mBAAmB,WAAW,WAAW,EAAE,UAAU,MAAM,CAAC;AAClE,MAAM,MAAM,QAAQ;AACpB,MAAM,OAAO;AAGN,SAAS,eAAe;AAE7B,MAAI,IAAI,KAAK,CAAC,KAAS,QAAY;AACjC,QAAI,SAAS,KAAK,KAAM,WAAW,eAAe,YAAa,CAAC;AAAA,EAClE,CAAC;AACD,MAAI,IAAI,gBAAgB,CAAC,KAAS,QAAY;AAC5C,QAAI,SAAS,KAAK,KAAM,WAAW,eAAe,aAAc,CAAC;AAAA,EACnE,CAAC;AACD,MAAI,IAAI,iCAAiC,CAAC,KAAS,QAAY;AAC7D,QAAI,SAAS,KAAK,KAAM,WAAW,eAAe,8BAA+B,CAAC;AAAA,EACpF,CAAC;AACD,MAAI,IAAI,2BAA2B,CAAC,KAAS,QAAY;AACvD,QAAI,SAAS,KAAK,KAAM,WAAW,eAAe,iBAAkB,CAAC;AAAA,EACvE,CAAC;AAED,MAAI,IAAI,gBAAgB,CAAC,KAAS,QAAY;AAC5C,QAAI,SAAS,KAAK,KAAM,WAAW,sBAAsB,aAAc,CAAC;AAAA,EAC1E,CAAC;AAED,MAAI,IAAI,aAAa,CAAC,KAAS,QAAY;AACzC,QAAI,SAAS,KAAK,KAAM,WAAW,sBAAsB,UAAW,CAAC;AAAA,EACvE,CAAC;AAED,MAAI,IAAI,UAAU,CAAC,KAAS,QAAY;AACtC,QAAI,SAAS,KAAK,KAAM,WAAW,eAAe,YAAa,CAAC;AAAA,EAClE,CAAC;AAED,MAAI,IAAI,UAAU,CAAC,KAAS,QAAY;AACtC,QAAI,SAAS,KAAK,KAAM,WAAW,eAAe,YAAa,CAAC;AAAA,EAClE,CAAC;AAED,MAAI,IAAI,WAAW,CAAC,KAAS,QAAY;AACvC,QAAI,SAAS,KAAK,KAAM,WAAW,eAAe,aAAc,CAAC;AAAA,EACnE,CAAC;AAED,MAAI,IAAI,WAAW,CAAC,KAAS,QAAY;AACvC,QAAI,SAAS,KAAK,KAAM,WAAW,eAAe,aAAc,CAAC;AAAA,EACnE,CAAC;AAED,MAAI,KAAK,UAAU,kBAAkB,SAAU,KAAS,KAAS;AAI/D,YAAQ,IAAI,mBAAiB,IAAI,KAAK,SAAS,MAAI,IAAI,KAAK,KAAK;AACjE,uCAAS,IAAI,KAAK,MAAgB,IAAI,KAAK,MAAgB,IAAI,KAAK,QAAQ,IAAI,KAAK,QAAkB,KAAK,IAAI,KAAK,KAAe;AAAA,EAEtI,CAAC;AAED,MAAI,IAAI,WAAW,CAAC,KAAS,QAAY;AACvC,QAAI,MAAM;AACV,aAAS,IAAI,GAAG,IAAI,2BAAM,SAAS,GAAG,KAAK;AACzC,aAAO,sCAAsC,2BAAM,QAAQ,2BAAM;AAAA,IACnE;AACA,WAAO,IAAI,2BAAM,SAAO,IAAE,SAAO,uCAAuC,2BAAM,2BAAM,SAAO,QAAQ,2BAAM,2BAAM,SAAO;AACtH,QAAI,2BAAM,UAAU,GAAG;AACrB,YAAM;AAAA,IACR;AACA,OAAG,cAAc,4BAA2B,GAAG;AAC/C,QAAI,SAAS,KAAK,KAAM,WAAW,eAAe,aAAc,CAAC;AAAA,EACnE,CAAC;AAED,MAAI,IAAI,qBAAqB,CAAC,KAAS,QAAY;AACjD,QAAI,SAAS,KAAK,KAAM,WAAW,eAAe,kBAAmB,CAAC;AAAA,EACxE,CAAC;AAED,MAAI,IAAI,MAAM,CAAC,KAAS,QAAY;AAClC,QAAI,SAAS,KAAK,KAAM,WAAW,eAAe,UAAW,CAAC;AAAA,EAChE,CAAC;AAOD,MAAI,OAAO,MAAM,MAAM;AACrB,YAAQ,IAAI,2BAA2B,OAAO;AAAA,EAChD,CAAC;AACH;",
  "names": []
}
