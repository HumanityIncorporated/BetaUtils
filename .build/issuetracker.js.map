{
  "version": 3,
  "sources": ["../issuetracker.ts"],
  "sourcesContent": ["import {issueDB} from './consts'\nimport {userRequest} from './userRequest'\nexport async function newIssue(title:string, body:string, prio:number, tags:string[], token:string, sessID:string) \n{\n  if (title.length == 0 || body.length == 0) return {status:\"ERROR\", data:{error:\"Please provide a title and a description.\"}, token:token}\n  let data = await issueDB.findOne({fieldName:\"MetaData\"});\n  let req = await userRequest(token);\n  let auth = \"Anonymous user \"+sessID.slice(0,7);\n  if (req.status == \"SUCCESS\") {\n    auth = req.data.user;\n    if (req.data.perms < 2 && prio > 2) return {status:\"ERROR\", data:{error:\"Invalid priority number!\"}, token:token};\n  }\n  else if (prio > 2) return {status:\"ERROR\", data:{error:\"Invalid priority number!\"}, token:token}\n  await issueDB.insertOne({fieldName:\"Issue\", id:data?data.issueCt+1:1, tags:tags, prio:prio, title:title, body:body, author:auth});  \n  if (data) \n    await issueDB.updateOne({fieldName:\"MetaData\"}, {\n      $inc: {issueCt: 1}\n    });\n  else await issueDB.insertOne({fieldName:\"MetaData\", issueCt:1});\n  return {status:\"SUCCESS\", data:{id:data.issueCt+1}, token:token};\n}\n\nexport async function loadIssues(from:number, ct:number, token:string) \n{\n  let out = await issueDB.find({fieldName:\"Issue\", id:{$gte:from}}).sort({id:1}).limit(ct).toArray();\n  return {status:\"SUCCESS\", data:{issues:out}, token:token};\n}\n\nexport async function deleteIssue(id:number, token:string) \n{\n  let req = await userRequest(token);\n  if (req.status != \"SUCCESS\") return req;\n  await issueDB.deleteOne({fieldName:\"Issue\", id:Number(id)});\n  return {status:\"SUCCESS\", data:null, token:token};\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAsB;AACtB,yBAA0B;AAC1B,eAAsB,SAAS,OAAc,MAAa,MAAa,MAAe,OAAc,QACpG;AACE,MAAI,MAAM,UAAU,KAAK,KAAK,UAAU;AAAG,WAAO,EAAC,QAAO,SAAS,MAAK,EAAC,OAAM,4CAA2C,GAAG,MAAW;AACxI,MAAI,OAAO,MAAM,sBAAQ,QAAQ,EAAC,WAAU,WAAU,CAAC;AACvD,MAAI,MAAM,UAAM,gCAAY,KAAK;AACjC,MAAI,OAAO,oBAAkB,OAAO,MAAM,GAAE,CAAC;AAC7C,MAAI,IAAI,UAAU,WAAW;AAC3B,WAAO,IAAI,KAAK;AAChB,QAAI,IAAI,KAAK,QAAQ,KAAK,OAAO;AAAG,aAAO,EAAC,QAAO,SAAS,MAAK,EAAC,OAAM,2BAA0B,GAAG,MAAW;AAAA,EAClH,WACS,OAAO;AAAG,WAAO,EAAC,QAAO,SAAS,MAAK,EAAC,OAAM,2BAA0B,GAAG,MAAW;AAC/F,QAAM,sBAAQ,UAAU,EAAC,WAAU,SAAS,IAAG,OAAK,KAAK,UAAQ,IAAE,GAAG,MAAW,MAAW,OAAa,MAAW,QAAO,KAAI,CAAC;AAChI,MAAI;AACF,UAAM,sBAAQ,UAAU,EAAC,WAAU,WAAU,GAAG;AAAA,MAC9C,MAAM,EAAC,SAAS,EAAC;AAAA,IACnB,CAAC;AAAA;AACE,UAAM,sBAAQ,UAAU,EAAC,WAAU,YAAY,SAAQ,EAAC,CAAC;AAC9D,SAAO,EAAC,QAAO,WAAW,MAAK,EAAC,IAAG,KAAK,UAAQ,EAAC,GAAG,MAAW;AACjE;AAEA,eAAsB,WAAW,MAAa,IAAW,OACzD;AACE,MAAI,MAAM,MAAM,sBAAQ,KAAK,EAAC,WAAU,SAAS,IAAG,EAAC,MAAK,KAAI,EAAC,CAAC,EAAE,KAAK,EAAC,IAAG,EAAC,CAAC,EAAE,MAAM,EAAE,EAAE,QAAQ;AACjG,SAAO,EAAC,QAAO,WAAW,MAAK,EAAC,QAAO,IAAG,GAAG,MAAW;AAC1D;AAEA,eAAsB,YAAY,IAAW,OAC7C;AACE,MAAI,MAAM,UAAM,gCAAY,KAAK;AACjC,MAAI,IAAI,UAAU;AAAW,WAAO;AACpC,QAAM,sBAAQ,UAAU,EAAC,WAAU,SAAS,IAAG,OAAO,EAAE,EAAC,CAAC;AAC1D,SAAO,EAAC,QAAO,WAAW,MAAK,MAAM,MAAW;AAClD;",
  "names": []
}
