{
  "version": 3,
  "sources": ["../initialiser.ts"],
  "sourcesContent": ["import {loopy} from './wordListHandle';\nimport {WS} from './wsHandler';\n// import { cnc } from './database';\nimport { updateServer } from './server';\nimport { updateActive } from './messageHandle';\nimport { initUsers} from './updateuser';\nimport {WebH} from './webHandler';\nimport { DB } from './database';\nimport {pushEvents, hidEvents} from './server';\nimport {DBGarbageCollect} from './accessControl'\nlet rooms = [\"xkcd\", \"test\", \"bots\", \"ai\", \"room\", \"srs\", \"memes\"];\nlet nicks = [\"BetaUtilities\", \"BetaUtilities_TEST\", \n             \"BetaUtilities\", \"BetaOS_Systems\", \n             \"BetaUtilities\", \"BetaUtilities\", \n             \"BetaUtilities\", \"BetaUtilities\", \n             \"BetaUtilities\", \"BetaUtilities\",\n             \"BetaUtilities\"]\nexport let sysRooms:string[] = [];//[\"main_support\", \"secondary_support\",\"room3\"];\nexport let hidRooms:string[] = [];\nexport function init() {\n  \n  let sockets = [];\n  updateServer();\n  initUsers();\n  for (let i=0; i<rooms.length; i++) {\n    sockets.push(new WS(\"wss://euphoria.io/room/\" + rooms[i] + \"/ws\", nicks[i], rooms[i], i==0));\n    webHandlers.push(null);\n    updateActive(rooms[i], true);\n  }\n  DB.findOne({fieldName:\"ROOMS\"}).then((obj:{rooms:string[], hidRooms:string[]})=>{\n    // sysRooms = obj.rooms;\n    let i=0;\n    for (; i<obj.rooms.length; i++) {\n      webHandlers[i] = new WebH(obj.rooms[i]);\n    }\n    for (let j=0; j<obj.hidRooms.length; j++) {\n      hidRooms.push(\"HIDDEN|\"+obj.hidRooms[j])\n      hidEvents.push([]);\n      // console.log(\"thing\")\n      webHandlers[i+j] = new WebH(obj.hidRooms[j], true);\n    }\n    // hidRooms = obj.hidRooms;\n    console.log(\"WebHandlers loaded. Sysrooms:\", sysRooms, \"hidden rooms:\", hidRooms)\n  });\n  // cnc();\n  loopy();\n  setInterval(()=>{DBGarbageCollect()}, 10000);\n}\n// export let currHandler:WebH;\nexport let webHandlers:WebH[] = [];\n\n\ninit();"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAoB;AACpB,uBAAiB;AAEjB,oBAA6B;AAC7B,2BAA6B;AAC7B,wBAAyB;AACzB,wBAAmB;AACnB,sBAAmB;AACnB,IAAAA,iBAAoC;AACpC,2BAA+B;AAC/B,IAAI,QAAQ,CAAC,QAAQ,QAAQ,QAAQ,MAAM,QAAQ,OAAO,OAAO;AACjE,IAAI,QAAQ;AAAA,EAAC;AAAA,EAAiB;AAAA,EACjB;AAAA,EAAiB;AAAA,EACjB;AAAA,EAAiB;AAAA,EACjB;AAAA,EAAiB;AAAA,EACjB;AAAA,EAAiB;AAAA,EACjB;AAAe;AACrB,IAAI,WAAoB,CAAC;AACzB,IAAI,WAAoB,CAAC;AACzB,SAAS,OAAO;AAErB,MAAI,UAAU,CAAC;AACf,kCAAa;AACb,mCAAU;AACV,WAAS,IAAE,GAAG,IAAE,MAAM,QAAQ,KAAK;AACjC,YAAQ,KAAK,IAAI,oBAAG,4BAA4B,MAAM,KAAK,OAAO,MAAM,IAAI,MAAM,IAAI,KAAG,CAAC,CAAC;AAC3F,gBAAY,KAAK,IAAI;AACrB,2CAAa,MAAM,IAAI,IAAI;AAAA,EAC7B;AACA,qBAAG,QAAQ,EAAC,WAAU,QAAO,CAAC,EAAE,KAAK,CAAC,QAA0C;AAE9E,QAAI,IAAE;AACN,WAAO,IAAE,IAAI,MAAM,QAAQ,KAAK;AAC9B,kBAAY,KAAK,IAAI,uBAAK,IAAI,MAAM,EAAE;AAAA,IACxC;AACA,aAAS,IAAE,GAAG,IAAE,IAAI,SAAS,QAAQ,KAAK;AACxC,eAAS,KAAK,YAAU,IAAI,SAAS,EAAE;AACvC,+BAAU,KAAK,CAAC,CAAC;AAEjB,kBAAY,IAAE,KAAK,IAAI,uBAAK,IAAI,SAAS,IAAI,IAAI;AAAA,IACnD;AAEA,YAAQ,IAAI,iCAAiC,UAAU,iBAAiB,QAAQ;AAAA,EAClF,CAAC;AAED,mCAAM;AACN,cAAY,MAAI;AAAC,+CAAiB;AAAA,EAAC,GAAG,GAAK;AAC7C;AAEO,IAAI,cAAqB,CAAC;AAGjC,KAAK;",
  "names": ["import_server"]
}
