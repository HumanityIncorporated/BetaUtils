{
  "version": 3,
  "sources": ["../../frontend/login.ts"],
  "sourcesContent": ["function onLoad() {\n  let match = document.cookie.match(\"__Secure-session=[0-9.]+\");\n  console.log(\"Current session: \" + match);\n  if (!match && document.URL.match(\"\\\\/admin\") && !document.URL.match(\"?redirect=(.*)\\\\/admin\")) {\n    alertDialog(\"You're not logged in!\", () => { window.open(\"/login?redirect=\"+document.URL, \"_self\"); });\n  }\n  // document.getElementById(\"alert\").hidden=true;\n  // document.getElementById(\"h1\").hidden=true;\n}\n\nlet CURRUSER = \"\";\nlet CURRACCNAME = \"\";\nlet CURRPERMS = \"\";\nlet LOADEDQ = false;\nlet TODOCT = 0;\n\nlet arr = new BigUint64Array(1);\nlet match = document.cookie.match(\"__Secure-session=([0-9.]+)\");\nlet sessionID = match ? match[1] : window.crypto.getRandomValues(arr);\n\nfunction newUser(e: Event, accessclass: string) {\n  let id = (e.target as HTMLElement).id;\n  // console.log(id);\n  if (id != \"loginBTN\")\n    return;\n  validateLogin(\"add\", escapeHtml(accessclass));\n}\n\nfunction deleteAllCookies() {\n  const cookies = document.cookie.split(\";\");\n\n  for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i];\n      const eqPos = cookie.indexOf(\"=\");\n      const name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;\n      document.cookie = name + \"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;Secure;\";\n  }\n  // alert(document.cookie);\n}\n\nconst escapeHtml = (unsafe:string) => {\n    return unsafe.replaceAll('&', '&amp;').replaceAll('<', '&lt;').replaceAll('>', '&gt;').replaceAll('\"', '&quot;').replaceAll(\"'\", '&#039;');\n}\n\nfunction sendMsg() {\n  let inp = document.getElementById(\"textINP\") as HTMLInputElement;\n  let msg = inp.value;\n  inp.value = \"\";\n  if (msg) validateLogin(\"sendMsg\", msg);\n}\n\nfunction validateLogin(action: string = \"login\", extData: string) {\n  let user = document.getElementById(\"userINP\") as HTMLInputElement;\n  let pass = document.getElementById(\"passINP\") as HTMLInputElement;\n  let confirm = document.getElementById(\"passINPCONF\") as HTMLInputElement;\n  // console.log(confirm.value);\n  // let todoPwd = document.getElementById(\"pwd\") as HTMLInputElement;\n  let CMD = document.getElementById(\"command\") as HTMLInputElement;\n  if (action == \"acquireTodo\" && extData == \"\") {\n    // setTimeout(()=>{todoPwd.focus({preventScroll: true})}, 500);\n    if (!document.cookie.match(\"__Secure-session=[0-9.]+\")) window.open(\"/signup?redirect=todo\", \"_self\");\n    // alertDialog(\"Please enter your password.\", ()=> {\n      validateLogin(\"acquireTodo\", \"OK\");\n    // })\n    return;\n  }\n\n  let match2 = action.match(\"updateTODO([0-9]+)\");\n  let match3 = action.match(\"completeTODO([0-9]+)\");\n  let match4 = action.match(\"deleteTODO([0-9]+)\");\n  let inp:HTMLInputElement;\n  \n  if (match2 || match3) {\n    inp = document.getElementById(\"todo\"+(match2?match2[1]:match3[1])) as HTMLInputElement;\n    if (match2){\n      inp.style.cursor = \"pointer\";\n      inp.readOnly = true;\n      inp.style.border=\"2px solid #eee\";\n    } \n  }\n  \n  if (action == \"refresh\" || action == \"refresh_users\") extData =document.URL.match(\"\\\\?room=([0-9a-zA-Z\\\\-_]{1,20})$\")[1];\n  if ((action != \"login\" && action != \"add\" && action != \"signup\") || (user.value.match(\"^[a-zA-Z0-9_]+$\") && pass.value.length !== 0)) {\n    if (confirm && (action == \"add\" || action == \"signup\") && confirm.value != pass.value) {\n      // console.log(\"Nomatch\");\n      alertDialog(\"Error: Your passwords do not match\", () => { location.reload(); });\n      return;\n    }\n    if (confirm) confirm.value = \"\";\n    let match = document.cookie.match(\"__Secure-session=([0-9.]+)\");\n    // ONLY USE THE sessionID WHEN ADDING A NEW session\n    \n    let renickQ = false;\n    // alert/(document.cookie);\n    let params;\n    if (action != \"logout\" && action != \"CMD\" \n        && action != \"sendMsg\" && action!=\"userReq\") \n      params = \"user=\" + encodeURIComponent(user?user.value:\"\") + \"&pass=\" + encodeURIComponent(pass?pass.value:\"\") + \"&action=\" + action + \"&access=\" + extData + \"&token=\" + sessionID;\n    else if (action == \"CMD\") {\n      params = \"user=\" + encodeURIComponent(CMD.value) + \"&action=CMD&token=\" + sessionID;\n      CMD.value = \"\";\n    }\n    else if (action == \"sendMsg\") {\n      params = \"token=\" + sessionID + \"&action=sendMsg&user=\" + encodeURIComponent(extData)+\"&access=\"+document.URL.match(\"\\\\?room=([0-9a-zA-Z\\\\-_]{1,20})$\")[1];;\n      let match = extData.match(\"!renick @([a-zA-Z_0-9]+)\");\n      \n      if (match) {\n        params = \"token=\"+sessionID+\"&action=renick&user=\"+encodeURIComponent(match[1])+\"&access=\"+document.URL.match(\"\\\\?room=([0-9a-zA-Z\\\\-_]{1,20})$\")[1];\n        renickQ = true;\n        if (!document.cookie.match(\"__Secure-session=([0-9.]+)\")) {\n          let ele = document.getElementById(\"msgArea\") as HTMLDivElement;\n          ele.innerHTML += `<p style=\"color: #ee0000;\">Error: You are not logged in. \n          You cannot re-alias yourself as an anomymous account.</p>`\n          ele.scrollTop = ele.scrollHeight;\n          return;\n        }\n      }\n      // // temporarily add this message to the div (until refresh handles it)\n      // let ele = document.getElementById('msgArea') as HTMLDivElement;\n      // ele.innerHTML += `<p><b class='${CURRPERMS==\"2\"?\"admin\":(CURRPERMS==\"3\"?\"beta\":\"\")}''>${CURRUSER} [SendingAWAIT]:</b> ${extData}</p><br>`;\n      // ele.scrollTop = ele.scrollHeight;\n    }\n    else params = \"user=&pass=&action=\"+action+\"&token=\" + sessionID;\n    let newRoomInp = document.getElementById(\"newroominp\") as HTMLInputElement;\n    if (action == \"newRoom\" || action == \"delRoom\") {\n      params = \"user=\"+newRoomInp.value+\"&action=\"+action+\"&token=\"+sessionID;\n      newRoomInp.value = \"\";\n    }\n    if (action == \"acquireTodo\" && extData == \"OK\"){\n      params = \"action=acquireTodo&token=\"+sessionID;\n    }\n    // this one is for updating the todo entry.\n    if (match2 || match3) params = \"user=\"+encodeURIComponent(inp.value)+\"&action=\"+action+\"&token=\"+sessionID;\n    if (action == \"addTODO\") params = \"user=&action=addTODO\"+\"&token=\"+sessionID;\n    if (pass) pass.value = \"\";\n     console.log(\"SENDING \" + params);\n     \n    var xhr = new XMLHttpRequest();\n    \n    let m = document.URL.match(\"redirect=(.*)\");\n    let redirectTo = m?m[1]:\"/\";\n    xhr.open(\"POST\", \"login\", true);\n    xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n    xhr.onreadystatechange = function() {\n      if (xhr.readyState == 4 && xhr.status == 200) {\n        if (action == \"server\") return;\n        let res = xhr.responseText;\n        res = JSON.parse(res);\n        let ele = document.getElementById('overlay');\n        if (ele) ele.className = \"\";\n        // console.log(res);\n        // console.log(\"action:\"+action);\n        ele = document.getElementById('h1');\n        if (ele) ele.className = \"beforeoverload\";\n        if (action != \"login\") {\n          if (action == \"newRoom\" || action == \"delRoom\") {\n            alertDialog(\"Room \"+(action==\"newRoom\"?\"creation: \":\"deletion: \")+\n              ((res==\"NOACTIVE\"||res==\"ACCESS\")?\"Access denied\":res), \n              ()=>{validateLogin(\"ROOMLISTING\", \"\")});\n            return;\n          }\n          if (action != \"userReq\" && (res == \"ERROR\" || res == \"NOACTIVE\" || res == \"ACCESS\")) {\n            // console.log(\"what?\")\n            if (document.URL.match(\"betatester1024\\\\.repl\\\\.co/?$\")) {\n              validateLogin(\"logout\", document.URL);\n            }\n            else if (res == \"ERROR\") alertDialog(\"Unknown error occurred.\", ()=> {location.reload()});\n            else if (res == \"NOACTIVE\") alertDialog(\"You are not logged in.\", () => { validateLogin(\"logout\", document.URL); });\n            else alertDialog(\"Access denied!\", ()=>{window.open(\"/login?redirect=\"+document.URL), \"_self\"})\n            return;\n          }\n          if (action == \"ROOMLISTING\") {\n            res = res as unknown as string[];\n            let mainDiv = document.getElementById(\"innerDiv\") as HTMLDivElement;\n            mainDiv.innerHTML = \"\";\n            for (let i=0; i<res.length; i++) {\n              let match = res[i].match(\"OnlineSUPPORT\\\\|(.*)\");\n              // let name = \"\";\n              // if (match) name = match[1];\n              if (match) mainDiv.innerHTML+=`<button class=\"unsetWidth\" onclick=\"window.open('/support?room=${match[1]}', '_self')\"><kbd>${match[1]}</kbd><hr class=\"btnHr\"></hr></button>`\n            }\n            return;\n          }\n          if (action == \"acquireTodo\") {\n            \n            // todoPwd.style.display=\"none\";\n            let todoDiv = document.getElementById(\"todo\") as HTMLDivElement;\n            todoDiv.innerHTML = \"\";\n            let todoList = res as unknown as string[]; // it's actually a string array.\n            // but we're not supposed to know that. so nasty hack >:(\n            for (let i=0; i<todoList.length; i++ ) {\n              let update = `<p> \n          <span class=\"material-symbols-outlined\" onclick=\"complete(${i})\">task_alt</span>\n          <input class=\"todo\" id=\"todo${i}\" value=\"${todoList[i].replaceAll(\"\\\"\", \"&quot;\")}\" onchange=\"modify(-1); validateLogin('updateTODO${i}', '')\" readonly onclick=\"modify(${i})\"/>\n          \n          <span id=\"span${i}\" class=\"material-symbols-outlined\" onclick=\"modify(${i})\">edit</span>\n          <span class=\"material-symbols-outlined\" onclick=\"del(${i})\">delete</span>\n        </p>`;\n              todoDiv.innerHTML += update;\n              // console.log(update);\n              TODOCT = res.length;\n              \n            }\n            // console.log(res.length);\n            modify();\n            resetAlertDiv();\n            return;\n          }\n          \n          if (renickQ && res != \"ERROR\") {\n            CURRUSER = res;\n            alertDialog(\"Renicked successfully to @\"+CURRUSER, ()=>{});\n          }\n          else if (renickQ) {\n            alertDialog(\"Error in re-nicking!\", ()=>{});\n          }\n          if (action == \"sendMsg\") {\n            // validateLogin(\"refresh\", \"send\");\n            return;\n          }\n          if (action == \"userReq\") {\n            let ele = document.getElementById(\"header\") as HTMLHeadingElement;\n            CURRUSER = res.split(\" \")[0];\n            CURRACCNAME = res.split(\" \")[0];\n            CURRPERMS = res.split(\" \")[1];\n            if (ele) {\n              if (res != \"ERROR\" && res !=\"NOACTIVE\" && res != \"ACCESS\")\n                ele.innerHTML = \"Welcome, \"+res.split(\" \")[0]+\"!\";\n              else ele.innerHTML = \"Welcome to BetaOS Services!\"\n            } else {\n              ele = document.getElementById(\"newRoom\") as HTMLDivElement;\n              if (!ele) {\n                switch(res.split(\" \")[1]) {\n                  case \"1\": \n                    (document.getElementById(\"sel\") as HTMLSelectElement).hidden=true;\n                    (document.getElementById('loginDIV') as HTMLDivElement).hidden=true;\n                    (document.getElementById(\"userLoginBTN\")as HTMLButtonElement).hidden=false;\n                    let userinp=document.getElementById(\"userINP\") as HTMLInputElement;\n                    userinp.value = res.split(\" \")[0];\n                    (document.getElementById(\"userDiv\") as HTMLDivElement).hidden=true;\n                    (document.getElementById(\"danger\") as HTMLDivElement).hidden=true;\n                  break;\n                }\n              } else {\n                ele.hidden = !CURRPERMS || Number(CURRPERMS)<2;\n                // console.log(ele.hidden);\n              } // add the newroom ment not hisde\n              \n            } // admin page\n            \n            return;\n          }\n          if (action == \"delete\" && res != \"NOACTIVE\" && res !=\"EXPIRE\" && res != \"ACCESS\" && res != \"ERROR\") {\n            alertDialog(\"Deleted user:\"+res, (CURRPERMS==\"1\")?()=>{window.open(\"/\",\"_self\");}:()=>{})\n            // deleteAllCookies();\n            if (CURRACCNAME == res) validateLogin(\"logout\", \"\");\n            return;\n          }\n          if (action == \"refresh\" || action== \"refresh_log\" || action == \"refresh_users\") {\n            if (res == \"ACCESS\" || res == \"EXPIRE\" || res == \"NOACTIVE\" || res == \"ERROR\") {\n              location.reload();\n            }\n            ele = document.getElementById(\"msgArea\") as HTMLDivElement;\n            if (action == \"refresh_users\") {\n              ele = document.getElementById(\"users\") as HTMLDivElement;\n              ele.innerHTML = \"Active users: <br>\" + (res as unknown as string[]).join(\"<br>\")+\"<br>\";\n              return;\n            }\n            if (action == \"refresh_log\") ele = ele as HTMLTextAreaElement;\n            // console.log(ele.scrollTop - ele.scrollHeight)\n            let scrDistOKQ =     Math.abs(ele.scrollTop - ele.scrollHeight) < 1000;\n            if (action == \"refresh\" && document.cookie.match(\"__Secure-session=([0-9.]+)\")) res += `\n            <p class=\"beta internMSG\"><i class=\"beta\">Welcome to BetaOS Services support! Enter any message\n            in the box below. Automated response services and utilities are provided\n            by BetaOS System. Activate it using the commands <a class=\"beta\" href=\"/commands?nick=BetaOS_System\" target=\"blank\">here</a>.\n            Enter </i><kbd class=\"beta\">!renick @[NEWNICK]</kbd><i class=\"beta\"> to rename yourself in all support rooms. This is linked to your account.\n            <br> Enter </i><kbd class=\"beta\">!whois @[USER]</kbd><i class=\"beta\"> to enquire about\n            the identity of any user, online or not.\n            <br>Thank you for using BetaOS Systems!</i></p><br>\n            `\n            else if (action == \"refresh\") res += `\n            <p class=\"beta internMSG\"><i class=\"beta\">Welcome to BetaOS Services support! Enter any message\n            in the box below. Automated response services and utilities are provided\n            by BetaOS System. Activate it using the commands <a class=\"beta\" href=\"/commands?nick=BetaOS_System\" target=\"blank\">here</a>.\n            <b style=\"color: #ee0000\">You are not logged in! Some functionality restricted, e.g. re-aliasing yourself.</b>\n            <br>Thank you for using BetaOS Systems!</i></p><br>`;\n            updateTextArea(res, action == \"refresh_log\");\n            \n            if (!LOADEDQ || extData == \"send\" || scrDistOKQ)\n            {\n              ele.scrollTop = ele.scrollHeight;\n              // console.log(\"Scrolling to bottom.\")\n              LOADEDQ = true;\n            }\n            return;\n          }\n          if (res == \"ACCESS\") {\n            alertDialog(\"Error: You do not have permissions!\", () => { });\n          }\n          else if (res == \"EXPIRE\")\n            alertDialog(\"Error: Your login session has expired!\", () => { validateLogin(\"logout\", \"\") });\n          else if (res == \"NOACTIVE\") {\n            \n            alertDialog(\"Error: You are not logged in!\", () => {validateLogin(\"logout\", document.URL);});\n          }\n          else if (action == \"logout\") {\n            // alert(\"Logging out\");\n            document.cookie = \"__Secure-session=; Secure;\";\n            if (extData) window.open(\"/login?redirect=\"+extData, \"_self\");\n            alertDialog(\"You've been logged out\", () => { window.open(\"/login?redirect=/\", \"_self\") });\n          }\n          else if (res == \"ERROR\") {\n            alertDialog(\"Unknown error!\", () => { });\n          }\n          else if (res == \"TAKEN\") {\n            alertDialog(\"This username is already taken!\", () => { });\n          }\n          else {\n            if (match2 || match3 ||match4|| action == \"addTODO\") {\n              if (match3 ||match4) alertDialog(match3?\"Task complete!\":\"Task deleted!\", ()=> {\n                validateLogin(\"acquireTodo\", \"OK\"); // already have password with us.\n              })\n              validateLogin(\"acquireTodo\", \"OK\");\n              return;\n            }\n            alertDialog(\"Action complete!\", () => { if (action == \"signup\") window.open(redirectTo, \"_self\") });\n            if (!match && action == \"signup\") document.cookie = \"__Secure-session=\" + sessionID + \"; SameSite=None; Secure;\";\n            \n          }\n          return;\n        } // not login\n        if (res == \"2\") {\n          alertDialog(\"Welcome, \" + user.value + \"! | Administrative access granted.\", () => { window.open(redirectTo, \"_self\"); })\n          CURRUSER = user.value;\n          CURRACCNAME = user.value;\n          CURRPERMS = \"2\";\n          deleteAllCookies();\n          // console.log(document.cookie);\n          \n          document.cookie = `__Secure-user=${CURRUSER}; SameSite=None; Secure;`\n          document.cookie = `__Secure-perms=${CURRPERMS}; SameSite=None; Secure;`;\n          document.cookie = `__Secure-session=${sessionID}; SameSite=None; Secure;`;\n          if (!match && action == \"login\") document.cookie = \"__Secure-session=\" + sessionID + \"; SameSite=None; Secure;\";\n        }\n        else if (res == \"3\") {\n          CURRUSER = user.value;\n          CURRACCNAME = user.value;\n          CURRPERMS = \"3\";\n          deleteAllCookies();\n          // console.log(document.cookie);\n          \n          document.cookie = `__Secure-user=${CURRUSER}; SameSite=None; Secure;`\n          document.cookie = `__Secure-perms=${CURRPERMS}; SameSite=None; Secure;`;\n          document.cookie = `__Secure-session=${sessionID}; SameSite=None; Secure;`;\n          alertDialog(\"Welcome, \"+user.value+\"! | Super-administrative access granted.\", () => { window.open(redirectTo, \"_self\") });\n          if (!match && action == \"login\") document.cookie = \"__Secure-session=\" + sessionID + \"; SameSite=None; Secure;\";\n        }\n        else if (res == \"1\") {\n          CURRUSER = user.value;\n          CURRACCNAME = user.value;\n          CURRPERMS = \"1\";\n          deleteAllCookies();\n          // console.log(document.cookie);\n          document.cookie = `__Secure-user=${CURRUSER}; SameSite=None; Secure;`\n          document.cookie = `__Secure-perms=${CURRPERMS}; SameSite=None; Secure;`;\n          document.cookie = `__Secure-session=${sessionID}; SameSite=None; Secure;`;\n          alertDialog(\"Welcome, \" + user.value + \"!\", () => { window.open(redirectTo, \"_self\"); });\n          if (!match && action == \"login\") document.cookie = \"__Secure-session=\" + sessionID + \"; SameSite=None; Secure;\";\n        }\n        else {\n          alertDialog(\"Error: Invalid login credentials\", () => { location.reload()});\n        }\n      }\n    }\n    xhr.send(params);\n    if (action != 'sendMsg' && action != \"refresh\" && action != \"refreshLog\" && action != 'refresh_users') {\n      let ele = document.getElementById('overlay');\n      if (ele) ele.className += \"active\";\n      ele = document.getElementById('h1');\n      if (ele) ele.hidden=false;\n      if (ele) ele.className = \"overload\";\n    }\n  } else if (!(user.value.match(\"^[a-zA-Z0-9_]+$\"))) {\n    alertDialog(\"Please enter a username with only alphanumeric characters, or underscores.\", () => { });\n  } else if (pass.value.length == 0) {\n    // alertDialog(\"Please enter a password.\", () => { })\n  }\n}\n\nfunction logout() {\n  // document.cookie = \"__Secure-session=\";\n  // console.log(\"Cookie should be removed.\")\n  validateLogin(\"logout\", \"\");\n  CURRUSER=\"\";\n  CURRACCNAME=\"\";\n}\n\nlet dialog = false;\nlet cbk: null|(()=>any);\n\nfunction alertDialog(txt: string, callback: () => any) {\n  let div = document.getElementById(\"alert\") as HTMLDivElement;\n  div.style.animationName = \"incoming\";\n  div.style.top = \"0px\";\n  let ele = document.getElementById(\"alerttxt\") as HTMLParagraphElement;\n  ele.innerText = txt;\n  dialog = true;\n  cbk = callback;\n  div.hidden=false;\n  // console.log(\"ALERT\");\n}\n\nfunction clearalert() {\n  if (dialog && cbk) {\n    let div = document.getElementById(\"alert\") as HTMLDivElement;\n    div.style.animationName = \"outgoing\";\n    div.style.top = \"100vh\";\n    dialog = false;\n    cbk()\n    cbk = null;\n    // alert.hidden=true;\n  }\n}\n\nfunction updateTextArea(msgs:string, textAreaQ:boolean) {\n  \n  let ele = document.getElementById(\"msgArea\") as HTMLDivElement;\n  let scrollHt = ele.scrollTop;\n  if (textAreaQ) ele.innerText = msgs.replaceAll(\"<br>\", \"\\n\");\n  else ele.innerHTML = msgs;\n  \n  ele.scrollTop = scrollHt;\n  \n}\nlet MODIFYN = -1;\nfunction modify(n:number=MODIFYN) {\n  // console.log(\"Modifying \"+n)\n  MODIFYN = n;\n  // console.log(n);\n  for (let i=0; i<TODOCT; i++) {\n    let inp = document.getElementById(\"todo\"+i) as HTMLInputElement;\n    let spn = document.getElementById(\"span\"+i) as HTMLSpanElement\n    if (i==n && inp && spn) {\n      inp.style.cursor = \"text\";\n      inp.readOnly = false;\n      inp.style.border=\"2px solid #0a84ff\";\n      inp.focus({preventScroll:true});\n      spn.onclick=()=>{modify(-1); validateLogin('updateTODO'+i, \"\")};\n    }\n    else if (inp && spn) {\n      inp.style.cursor = \"pointer\";\n      inp.readOnly = true;\n      inp.style.border=\"2px solid #eee\";\n      inp.blur();\n      spn.onclick=()=>{modify(i)};\n    }\n  }\n}\n\nfunction complete(n:number) {\n  // console.log(\"Modifying \"+n)\n  validateLogin(\"completeTODO\"+n, \"\");\n}\n\nfunction add() {\n  validateLogin(\"addTODO\", \"\");\n  MODIFYN = TODOCT;\n}\n\nfunction del(n:number) {\n  validateLogin(\"deleteTODO\"+n, \"\");\n}\n\nfunction resetAlertDiv() {\n  let div = document.getElementById(\"alert\") as HTMLDivElement;\n  div.onclick=clearalert;\n}"],
  "mappings": "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",
  "names": ["match", "ele"]
}
