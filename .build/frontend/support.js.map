{
  "version": 3,
  "sources": ["../../frontend/support.js"],
  "sourcesContent": ["function onLoad() {\n  // send(JSON.stringify({action:\"refresh\"}), (res)=>{\n  // });\n  // send(JSON.stringify({action:\"refresh_users\"}), (res)=>{\n  // });\n  // BTTOMNPUT = document.createElement(\"input\");\n  // REPLYINPUT.className = \"inp\";\n  BOTTOMINPUT = byId(\"bottomInput\");\n  // REPLYINPUT.id = \"rep\"\n  setInterval(updateTime, 1000);\n  document.getElementById(\"header\").innerText = \"Support: \"+(ISBRIDGE?\"&\":\"#\")+\n    docURL.searchParams.get(\"room\");\n  ROOMNAME = docURL.searchParams.get(\"room\");\n  document.addEventListener(\"keydown\", onKeyPress);\n}\nfunction onKeyPress(e) {\n  if (e.key == \"b\" && e.ctrlKey && !e.metaKey && !e.shiftKey) {\n    let ele = byId(\"right\");\n    console.log(e);\n    ele.style.display = (ele.style.display==\"flex\")?\"none\":\"flex\";\n    e.preventDefault();\n  }\n}\nfunction updateTime() {\n  let allElements = document.getElementsByClassName(\"time\");\n  for (let ele of allElements) {\n    ele.innerText = toTime(Date.now()-ele.dataset.time*1000);\n  }\n}\n// system refresh auto!\nlet ACTIVEREPLY = -1;\nlet awaitingParent = [];\nlet BOTTOMINPUT = null\nfunction byMsgId(id) \n{\n  return byId(\"msgArea\").querySelector(\"[data-id='\"+id+\"']\")\n}\nfunction toggleActiveReply(id) \n{\n  if (ACTIVEREPLY == id) {\n    byMsgId(id).classList.remove(\"activeReply\");\n    ACTIVEREPLY = -1;\n    byId(\"container\").appendChild(BOTTOMINPUT);\n    // BOTTOMINPUT.style.display=\"flex\";\n  }\n  else {\n    if (ACTIVEREPLY!=-1) toggleActiveReply(ACTIVEREPLY);\n    byMsgId(id).classList.add(\"activeReply\");\n    ACTIVEREPLY = id;\n  }\n  updateReplyBox();\n  // BOTTOMINPUT.style.display=(ACTIVEREPLY==\"-1\"?\"flex\":\"none\");\n}\n\nfunction updateReplyBox() \n{\n  if (ACTIVEREPLY == \"-1\") {\n    byId(\"msgInp\").focus();\n    return;\n  }\n  byMsgId(ACTIVEREPLY).appendChild(BOTTOMINPUT);\n  byId(\"msgInp\").focus();\n}\n\nfunction updateAlias(newAlias) {\n  // source.close();\n\n\n  if (ISBRIDGE) {\n    // console.log(\"here\");\n\n    source.send(JSON.stringify({\n      action:\"updateAlias\", \n      data:{alias:newAlias}\n    }));\n  }\n  else {\n    source.close();\n    document.getElementById(\"userList\").innerHTML = ``;\n    send(JSON.stringify({action:\"realias\", data:{alias:newAliass}}), (res)=>{\n      if (res.status != \"SUCCESS\") alertDialog(\"ERROR: \"+res.data.error, ()=>{});\n      else alertDialog(\"Updated alias!\", ()=>{\n        STARTID = -1;\n        STARTIDVALID = false;\n        loadStatus = -1;\n        document.getElementById(\"msgArea\").innerHTML = `<h2 id=\"placeholder\">\n        <span class=\"material-symbols-outlined\">update</span> \n        Reloading your messages, a moment please...</h2>`;\n        initClient();\n      });\n    });\n  }\n}\n\nfunction sendMsg(ev) {\n  if (ev && ev.target.id != \"msgInp\") return;\n  let inp = document.getElementById(\"msgInp\");\n  if (inp.value.length == 0) return;\n  let match = inp.value.match(\"^!alias @(.+)\");\n  if (match) {\n    updateAlias(match[1])\n    // } // not bridge\n  }\n  else {\n    if (ISBRIDGE) source.send(JSON.stringify({action:\"sendMsg\", data:{msg:inp.value, room:ROOMNAME, parent:ACTIVEREPLY}}));\n    else send(JSON.stringify({action:\"sendMsg\", data:{msg:inp.value, room:ROOMNAME, parent:ACTIVEREPLY}}), ()=>{}, true);\n  }\n  inp.value=\"\";\n  // byId(\"alias-text\").value=\"\"\n}\n\nfunction fitSize() {\n  byId(\"alias-text\").innerText = byId(\"alias\").value;\n  byId(\"alias\").focus();\n}\n  \nconst rmvReg = /(>|^)\\-(.+)\\([0-9]\\)>/gm;\nconst addReg = /(>|^)\\+(.+)\\([0-9]\\)>/gm;\nconst classStr = [\"error\", \"user\", \"admin\", \"superadmin\"]\nlet source = null;\nlet CONNECTIONID = -1;\nasync function initClient()\n{\n  \n  try {\n  console.log(\"Starting client.\")\n  // let isBridge = docURL.searchParams.get(\"bridge\");\n  if (ISBRIDGE)\n    source = new WebSocket('wss://'+docURL.host+'/bridge?room='+\n       docURL.searchParams.get(\"room\"));\n  else source = new WebSocket('wss://'+docURL.host+'?room='+\n                                 docURL.searchParams.get(\"room\"));\n  source.onclose = ()=>{console.log(\"Connection closed by server.\"); setTimeout(initClient, 500)};\n  source.onerror = ()=>{console.log(\"Connection ERROR\"); setTimeout(initClient, 500)};\n  source.onmessage = (message) => {\n    console.log('Got', message);\n    message = JSON.parse(message.data);\n    ele = document.getElementById(\"userList\");\n    // let modif = message.data;\n    let action = message.action;\n    if (message.action == \"CONNECTIONID\") {\n      \n      CONNECTIONID = message.data.id;\n    }    \n    if (message.action == \"RELOAD\" || message.action == \"RESTART\") {\n      document.getElementById(\"msgArea\").innerHTML = `<h2 id=\"placeholder\">\n        <span class=\"material-symbols-outlined\">update</span> \n        Reloading your messages, a moment please...</h2>`;\n      document.getElementById(\"userList\").innerHTML = \"\";\n      LOADEDQ2=false;\n      STARTID=-1;\n      ACTIVEREPLY = -1;\n      STARTIDVALID = false;\n      byId(\"container\").appendChild(BOTTOMINPUT);\n      UNREAD = 0;\n      loadStatus = -1;\n      CONNECTIONID = -1;\n      awaitingParent = [];\n      if (message.action == \"RESTART\") source.close();\n    }    \n    if (message.action == \"delMsg\") {\n      let ele = byMsgId(message.data.id);\n      if (ele) ele.remove();\n    }\n    if (message.action == \"LOADCOMPLETE\") {\n      let thing = document.getElementById(\"msgArea\")\n      if (message.data.id<0) {\n        if (!byId(\"errorEle\")) {\n        let errorEle = document.createElement(\"b\");\n        errorEle.className = \"red\";\n        errorEle.id=\"errorEle\";\n        errorEle.innerText = \"No more messages to load\";\n        errorEle.style.display=\"block\";\n        thing.prepend(errorEle);\n        }\n      }\n      else {\n        loadStatus = -1;\n        STARTID=message.data.id;\n        // alert(\"lcMatchId updated\"+ STARTID);\n      }\n      console.log(\"Fixing awaitingParent.\")\n      fixAwaitingParent();\n      thing.scrollTop = thing.scrollTop+1;\n    }    \n    if (message.action == \"removeUser\") {\n      let ele2 = byId((message.data.isBot?\"zbot\":\"usr\")+message.data.user);\n      if (ele2) ele2.remove();\n    }\n    if (message.action==\"addUser\") {\n      let span = document.createElement(\"p\");\n      span.innerText = message.data.user;\n      span.id = (message.data.isBot?\"zbot\":\"usr\")+message.data.user;\n      span.title = message.data.user;\n      if (message.data.isBot) span.classList.add(\"bot\");\n      ele.appendChild(span);\n    }\n    if (message.action== \"yourAlias\") {\n      byId(\"alias\").value = message.data.alias;\n      byId(\"alias-text\").innerText = message.data.alias\n      byId(\"msgInp\").focus();\n    }\n    if (message.action == \"addUser\" || message.action == \"removeUser\") {\n      // console.log(\"sorting\");\n      let children = ele.childNodes;\n      let outArr = [];\n      for (let i=0; i<children.length; i++) \n        outArr.push(children[i]);\n      outArr.sort(function(a, b) {\n        return a.id == b.id?0:(a.id > b.id?1:-1);\n      });\n      ele.innerHTML = \"\";\n      for (i=0; i<outArr.length; i++) {\n        ele.appendChild(outArr[i]);\n      }\n    }\n    let modif = \"\";\n    // console.log(modif);\n    let area = document.getElementById(\"msgArea\");\n    ele = document.createElement(\"p\");\n\n    let scrDistOKQ =  (area.scrollTop) >= (area.scrollHeight-area.offsetHeight - 100)\n    // let msgs = modif.split(\">\");\n    if (message.action == \"msg\") {\n      // console.log(message.data.time);\n      matches = [\"ERROR\", message.data.id, message.data.sender, message.data.perms, message.data.content];\n      // let matches = msgs[i].match(/{(-?[0-9]+)}\\[(.+)\\]\\(([0-9])\\)(.*)/)\n      if (!matches) return;\n      \n      PREPENDFLAG = false;\n      if (STARTID<0 || matches[1] == 0) {\n        STARTID = Number(matches[1]);\n        STARTIDVALID = true;\n        // alert(STARTID);\n      }\n      if (matches[1][0] == \"-\") {\n        // console.log(\"PREPENDING\")p\n        PREPENDFLAG = true;\n        matches[1] = matches[1].toString().slice(1);\n        if (loadStatus == 0) loadStatus = 1;\n      }\n      if (message && message.data && message.data.id && \n        byMsgId(matches[1])) return;\n      if (message.data.time) \n      if (message.data.time < earliestMessageTime) {\n        earliestMessageTime = message.data.time;\n        earliestMessageID = matches[1];\n      }\n      // let newMsgBody = document.createTextNode();\n      let newMsgSender = document.createElement(\"b\");\n      // parse things\n      newMsgSender.innerText = matches[2];\n      newMsgSender.className = classStr[matches[3]];\n      \n      let ctn = document.createElement(\"div\");\n      ctn.dataset.id=matches[1];\n      \n      ctn.className='msgContainer';\n      // if (!PREPENDFLAG) ctn.appendChild(newMsgSender);\n      // newMsgBody.className = classStr[matches[3]];\n      let msg = \" \"+matches[4].replaceAll(\"&gt;\", \";gt;\").replaceAll(\">\", \";gt;\");\n      for (let i=0; i<replacements.length; i++) {\n        msg = msg.replaceAll(`:${replacements[i].from}:`, \">EMOJI\"+replacements[i].to+\">\");\n      }\n      let slashMe = false;\n      msg = msg.replaceAll(/(&[a-zA-Z0-9]{1,20})([^;]|$)/gm,\">ROOM$1>$2\")\n      msg = msg.replaceAll(/(#[a-zA-Z0-9_\\-]{1,20})([^;]|$)/gm,\">SUPPORT$1>$2\")\n      msg = msg.replaceAll(/(;gt;;gt;[^ ]{0,90})/gm,\">INTERNALLINK$1>\");\n      msg = msg.replaceAll(/((http|ftp|https):\\/\\/)?(?<test>([\\w_-]+(?:(?:\\.[\\w_-]+)+))([\\w.,@?^=%&:\\/~+#-]*[\\w@?^=%&\\/~+#-]))/gmiu,\">LINK$<test>>\")\n      msg = msg.replaceAll(/\\n/gmiu,\">BR>\")\n      // console.log(msg);\n      if (msg.match(\"^[ \\n]*/me(.*)\")) {\n        msg = msg.match(\"^[ \\n]*/me(.*)\")[1];\n        slashMe = true;\n        ele.className += \" slashMe \" + classStr[matches[3]];\n      }\n      else ele.className = classStr[matches[3]];\n      \n      let split = msg.split(\">\");\n      // console.log(\"message fragments:\", split.length, split);\n      let out= \"\";\n      for (let i=0; i<split.length; i++) {\n        if (i%2 == 0) {\n          let fragment = document.createTextNode(split[i].replaceAll(\";gt;\", \">\"));\n          fragment.className = classStr[matches[3]] //+ (slashMe?\" slashMe \":\"\");\n          // fragment.innerText = split[i].replaceAll(\";gt;\", \">\");\n          ele.appendChild(fragment);\n        }\n        else {\n          let pref = split[i].match(\"^(EMOJI|LINK|ROOM|SUPPORT|INTERNALLINK|BR)\")[1];\n          let post = pref!=\"BR\"?(split[i].match(\"^(EMOJI|LINK|ROOM|SUPPORT|INTERNALLINK|BR)(.+)\")[2]):\"\";\n          if (pref == \"EMOJI\") {\n            let replaced = document.createElement(\"span\");\n            replaced.title = \":\"+findReplacement(post)+\":\";\n            replaced.className=\"material-symbols-outlined supportMsg \"+classStr[matches[3]] + (slashMe?\" slashMe \":\"\");\n            replaced.innerText = post;\n            ele.appendChild(replaced);\n          }\n          else if (pref == \"LINK\") {\n            let replaced = document.createElement(\"a\");\n            replaced.className=\"supportMsg \"+classStr[matches[3]] //+ (slashMe?\" slashMe \":\"\");\n            replaced.href = \"https://\"+post.replaceAll(\";gt;\", \">\");\n            replaced.innerText = post.replaceAll(\";gt;\", \">\");\n            replaced.setAttribute(\"target\", \"_blank\");\n            ele.appendChild(replaced);\n          }\n          else if (pref == \"ROOM\") {\n            let replaced = document.createElement(\"a\");\n            replaced.className=\"supportMsg \"+classStr[matches[3]] //+ (slashMe?\" slashMe \":\"\");\n            replaced.href = \"https://euphoria.io/room/\"+post.slice(1);\n            replaced.innerText = post;\n            ele.appendChild(replaced);\n          }\n          else if (pref == \"SUPPORT\") {\n            let replaced = document.createElement(\"a\");\n            replaced.className=\"supportMsg \"+classStr[matches[3]] //+ (slashMe?\" slashMe \":\"\");\n            replaced.href = \"/support?room=\"+post.slice(1);\n            replaced.innerText = post;\n            ele.appendChild(replaced);\n          }\n          else if (pref == \"INTERNALLINK\") {\n            let replaced = document.createElement(\"a\");\n            replaced.className=\"supportMsg \"+classStr[matches[3]] //+ (slashMe?\" slashMe \":\"\");\n            replaced.href = post.slice(8).replaceAll(\";gt;\", \">\");\n            // replaced.setAttribute(\"target\", \"_blank\");\n            replaced.innerText = \">>\"+post.slice(8).replaceAll(\";gt;\", \">\");\n            ele.appendChild(replaced);\n          }\n          else if (pref == \"BR\") {\n            ele.appendChild(document.createElement(\"br\"));\n          }\n        }\n      }\n      \n      let ctn_inner = document.createElement(\"div\");\n      ctn_inner.className = \"msgContents\";\n      ctn_inner.appendChild(newMsgSender);\n      ctn_inner.appendChild(ele);\n      ctn_inner.innerHTML += `<div class=\"time\" data-time=\"${message.data.time}\">${toTime(Date.now()-message.data.time*1000)}</div>`\n      if (Date.now()/1000 - message.data.time < 60)\n        ctn_inner.style.animation = \"newMsg \"+(60-(Date.now()/1000-message.data.time))+\"s\";\n      let optn = document.createElement(\"div\");\n      optn.className = \"options\";\n      optn.innerHTML = `\n      <button class=\"btn\">\n        <span class=\"material-symbols-outlined\">reply</span>\n      </button>`\n      ctn_inner.appendChild(optn);\n      ctn.appendChild(ctn_inner);\n      let bar = document.createElement(\"div\");\n      bar.className = \"bar\";\n      ctn.appendChild(bar);\n      ctn_inner.onclick=\n        (ev)=>{ \n          toggleActiveReply(ctn.dataset.id);\n        }\n      // area.appendChild(document.createElement(\"br\"));\n      if (message.data.perms == 3 && message.data.sender == \"[SYSTEM]\") ctn.dataset.id=\"-1\";\n      \n      if (message.data.parent != undefined && \n          (isNaN(message.data.parent) || message.data.parent >= 0)) { // euph: parent is a NaN string\n        if (byMsgId(message.data.parent)) {\n          // if (PREPENDFLAG) byId(message.data.parent).prepend(ctn);\n          byMsgId(message.data.parent).appendChild(ctn);\n          for (let i=0; i<awaitingParent.length; i++) {\n            if (awaitingParent[i].ele.dataset.id == ctn.dataset.id) {\n              awaitingParent.splice(i, 1);\n              break;\n            }\n          } // remove already awaiting parent\n        }\n        else {\n          awaitingParent.push({parent:message.data.parent, ele:ctn, prependQ:ISBRIDGE&&PREPENDFLAG});\n          console.log(\"awaiting parent\", message.data.parent, ctn);\n        }\n      }\n      else {\n        if (PREPENDFLAG) area.prepend(ctn);\n        else area.appendChild(ctn);\n      }\n      document.getElementById(\"placeholder\").style.display=\"none\";\n      if (!FOCUSSED) {\n        UNREAD ++ \n        document.title = \"(\"+UNREAD+\") | Support | BetaOS Systems\"\n      }\n      updateReplyBox();\n    } // received message element // \n    // alert(\"here\")\n    if (!LOADEDQ2 || scrDistOKQ)\n    {\n      area.scrollTop = area.scrollHeight;\n      // console.log(\"Scrolling to bottom.\")\n      LOADEDQ2 = true;\n      // alert(\"scrolled\")\n    }\n    // else alert(\"invalid\")\n\n    \n  } // handler function;\n  } catch (e) {\n    alert(e);\n    console.log(\"Restartng client (\"+e+\")\")\n    setTimeout(initClient, 0);\n  }\n  document.getElementById(\"msgInp\").focus();\n} // initClient();\n\n\nconst replacements = [\n  {from: \"one\", to: \"counter_1\"},\n  {from: \"two\", to: \"counter_2\"},\n  {from: \"three\", to: \"counter_3\"},\n  {from: \"four\", to: \"counter_4\"},\n  {from: \"five\", to: \"counter_5\"},\n  {from: \"six\", to: \"counter_6\"},\n  {from: \"seven\", to: \"counter_7\"},\n  {from: \"eight\", to: \"counter_8\"},\n  {from: \"nine\", to: \"counter_9\"},\n  {from: \"zero\", to: \"counter_0\"},\n  {from: \"white_check_mark\", to: \"check_circle\"},\n  {from: \"active\", to: \"check_circle\"},\n  {from: \"info\", to: \"info\"},\n  {from: \"confirm\", to:\"check\"},\n  {from: \"warn\", to: \"warning\"},\n  {from: \"error\", to:\"error\"},\n  {from: \"egg\", to:\"egg_alt\"},\n  {from: \"rotating_light\", to:\"e911_emergency\"},\n  {from: \"sparkles\", to:\"magic_button\"},\n  {from: \"mask\", to:\"medical_mask\"}\n]\n\n// function replaceAll(msg, ele, matches) {\n//   console.log(msg, ele, matches);\n//   for (let j=0; j<replacements.length; j++) {\n//     let regex = new RegExp(replacements[j].from, \"gmiu\");\n//     while ((arr = regex.exec(msg)) !== null) {\n//       console.log(`Found ${arr[0]}. `, arr.index);\n//       let fragment = document.createElement(\"span\");\n//       fragment.className = classStr[matches[3]];\n//       console.log(msg.slice(0, arr.index));\n//       if (msg.slice(0, arr.index)) replaceAll(msg.slice(0, arr.index), ele, matches);\n//       let replaced = document.createElement(\"span\");\n//       replaced.className=\"material-symbols-outlined supportMsg \"+classStr[matches[3]];\n//       replaced.innerText = replacements[j].to;\n//       console.log(replaced);\n//       ele.appendChild(replaced);\n//       msg = msg.slice(arr.index+replacements[j].from.length);\n//       console.log(msg);\n//     }\n//   } // for replacements\n// }\n\nfunction findReplacement(thing) {\n  for (let i=0; i<replacements.length; i++) {\n    if (replacements[i].to == thing) return replacements[i].from;\n  }\n}\n\nwindow.addEventListener(\"blur\", () => {\n  UNREAD = 0;\n  FOCUSSED = false;\n});\n\n// when the user's focus is back to your tab (website) again\nwindow.addEventListener(\"focus\", () => {\n  document.title = \"Support | BetaOS Systems\";\n  FOCUSSED = true;\n  UNREAD = 0;\n});\n\nlet UNREAD = 0;\nlet FOCUSSED = true;\nlet STARTID = -1;\nlet LOADEDQ2 = false;\nlet STARTIDVALID = false;\nlet earliestMessageTime = 9e99;\nlet earliestMessageID = \"\";\nlet ISBRIDGE = docURL.searchParams.get(\"bridge\")==\"true\";\nfunction onScroll() {\n  \n  if (document.getElementById(\"msgArea\").scrollTop < 30 && STARTIDVALID && loadStatus<0) {\n    loadStatus = 0;\n    console.log(\"loading messages from\" + STARTID)\n    if (ISBRIDGE)\n      source.send(JSON.stringify({action:\"loadLogs\", data:{before:earliestMessageID}}));\n    else\n      send(JSON.stringify({action:\"loadLogs\", data:{room:ROOMNAME, id:CONNECTIONID, from:STARTID}}), ()=>{});\n  }\n  \n  else if (document.getElementById(\"msgArea\").scrollTop < 30) console.log(\"loadStatus\" + loadStatus)\n}\nlet loadStatus = -1;\n\nfunction fixAwaitingParent() \n{\n  console.log(awaitingParent);\n  for (let i=0; i<awaitingParent.length; i++) {\n    if (byMsgId(awaitingParent[i].parent)) {\n      let ctner = byMsgId(awaitingParent[i].parent);\n      if (!byMsgId(awaitingParent[i].ele.dataset.id)) {// do not add if it has already been added\n        if (awaitingParent[i].prependQ) \n          // referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n          ctner.insertBefore(awaitingParent[i].ele, ctner.children[1]);\n        else ctner.appendChild(awaitingParent[i].ele);\n        // console.log(\"actually added\", awaitingParent[i].ele);\n      }\n      // else console.log(\"didnt'actually add\")\n      // console.log(\"added\");\n      awaitingParent.splice(i, 1);\n      // console.log(awaitingParent);\n      i=-1;\n    }\n  }\n}"],
  "mappings": "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",
  "names": ["ele", "i"]
}
