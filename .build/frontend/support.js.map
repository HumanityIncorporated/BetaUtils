{
  "version": 3,
  "sources": ["../../frontend/support.js"],
  "sourcesContent": ["function onLoad() {\n  validateLogin(\"refresh\", \"\");\n  validateLogin(\"refresh_users\", \"\");\n  // setInterval(()=>{validateLogin(\"refresh\", \"\")}, 2500);\n  document.getElementById(\"alert\").hidden=true;\n  document.getElementById(\"h1\").hidden=true;\n  // console.log(document.cookie);\n  let match = document.cookie.match(\"__Secure-user=(.+)\");\n  // console.log(match[1]);\n  if (match) CURRUSER = match[1];\n  match = document.cookie.match(\"__Secure-perms=([0-9]+)\");\n  // console.log(match[1]);\n  if (match) CURRPERMS = match[1];\n  document.getElementById(\"header\").innerHTML = \"Support: #\"+\n    document.URL.match(\"\\\\?room=(.*)\")[1];\n}\n// system refresh auto!\nlet LOADEDQ2 = false;\nasync function initClient()\n{\n  \n  try {\n  console.log(\"Starting client.\")\n  const source = new EventSource('/stream?room='+\n                                 document.URL.match(\"\\\\?room=([0-9a-zA-Z\\\\-_]{1,20})$\")[1]+\n                                 \"&token=\"+sessionID);\n  source.addEventListener('message', message => {\n    console.log('Got', message);\n    ele = document.getElementById(\"users\");\n    let modif = message.data;\n    let removed = modif.match(\"^\\\\-(.+)\\\\\\\\n\");\n    let added = modif.match(\"^\\\\+(.+)\\\\\\\\n\");\n    while (removed || added) {\n      if (removed) {\n        ele.innerHTML= ele.innerHTML.replace(removed[1]+\"<br>\", \"\");\n        console.log(\"removed\"+removed[1])\n      }\n      if (added) {\n        ele.innerHTML+= added[1]+\"<br>\";\n        console.log(\"added\"+added[1]);\n      }\n      modif = modif.replaceAll(/^\\-(.+)\\\\n/gm, \"\");\n      modif = modif.replaceAll(/^\\+(.+)\\\\n/gm, \"\");\n      removed = modif.match(\"^\\\\-(.+)\\\\\\\\n\");\n      added = modif.match(\"^\\\\+(.+)\\\\\\\\n\");\n    }\n    ele = document.getElementById(\"msgArea\");\n    let scrDistOKQ =  (ele.scrollTop) >= (ele.scrollHeight-ele.offsetHeight - 100)\n    document.getElementById(\"msgArea\").innerHTML+=modif;\n    \n    if (!LOADEDQ2 || scrDistOKQ)\n    {\n      ele.scrollTop = ele.scrollHeight;\n      // console.log(\"Scrolling to bottom.\")\n      LOADEDQ2 = true;\n    }\n\n    \n  });\n  } catch (e) {\n    console.log(\"Restartng client (\"+e+\")\")\n    setTimeout(initClient, 0);\n  }\n} // initClient();"],
  "mappings": ";AAAA,SAAS,SAAS;AAChB,gBAAc,WAAW,EAAE;AAC3B,gBAAc,iBAAiB,EAAE;AAEjC,WAAS,eAAe,OAAO,EAAE,SAAO;AACxC,WAAS,eAAe,IAAI,EAAE,SAAO;AAErC,MAAI,QAAQ,SAAS,OAAO,MAAM,oBAAoB;AAEtD,MAAI;AAAO,eAAW,MAAM;AAC5B,UAAQ,SAAS,OAAO,MAAM,yBAAyB;AAEvD,MAAI;AAAO,gBAAY,MAAM;AAC7B,WAAS,eAAe,QAAQ,EAAE,YAAY,eAC5C,SAAS,IAAI,MAAM,cAAc,EAAE;AACvC;AAEA,IAAI,WAAW;AACf,eAAe,aACf;AAEE,MAAI;AACJ,YAAQ,IAAI,kBAAkB;AAC9B,UAAM,SAAS,IAAI,YAAY,kBACA,SAAS,IAAI,MAAM,kCAAkC,EAAE,KACvD,YAAU,SAAS;AAClD,WAAO,iBAAiB,WAAW,aAAW;AAC5C,cAAQ,IAAI,OAAO,OAAO;AAC1B,YAAM,SAAS,eAAe,OAAO;AACrC,UAAI,QAAQ,QAAQ;AACpB,UAAI,UAAU,MAAM,MAAM,eAAe;AACzC,UAAI,QAAQ,MAAM,MAAM,eAAe;AACvC,aAAO,WAAW,OAAO;AACvB,YAAI,SAAS;AACX,cAAI,YAAW,IAAI,UAAU,QAAQ,QAAQ,KAAG,QAAQ,EAAE;AAC1D,kBAAQ,IAAI,YAAU,QAAQ,EAAE;AAAA,QAClC;AACA,YAAI,OAAO;AACT,cAAI,aAAY,MAAM,KAAG;AACzB,kBAAQ,IAAI,UAAQ,MAAM,EAAE;AAAA,QAC9B;AACA,gBAAQ,MAAM,WAAW,gBAAgB,EAAE;AAC3C,gBAAQ,MAAM,WAAW,gBAAgB,EAAE;AAC3C,kBAAU,MAAM,MAAM,eAAe;AACrC,gBAAQ,MAAM,MAAM,eAAe;AAAA,MACrC;AACA,YAAM,SAAS,eAAe,SAAS;AACvC,UAAI,aAAe,IAAI,aAAe,IAAI,eAAa,IAAI,eAAe;AAC1E,eAAS,eAAe,SAAS,EAAE,aAAW;AAE9C,UAAI,CAAC,YAAY,YACjB;AACE,YAAI,YAAY,IAAI;AAEpB,mBAAW;AAAA,MACb;AAAA,IAGF,CAAC;AAAA,EACD,SAAS,GAAP;AACA,YAAQ,IAAI,uBAAqB,IAAE,GAAG;AACtC,eAAW,YAAY,CAAC;AAAA,EAC1B;AACF;",
  "names": []
}
